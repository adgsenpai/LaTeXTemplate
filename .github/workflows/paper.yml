name: Build and Publish Paper
on: [push, pull_request]
jobs:
  CompileAndPublishLaTeXPaper:
    runs-on: ubuntu-latest
    steps:      
      - uses: actions/checkout@v2
      - name: Setup TeXLive          
        run: |
          sudo apt-get -y install texlive-latex-recommended texlive-pictures texlive-latex-extra
      - name: Compile Paper to PDF and Publish
        run: |
          sudo pdflatex main.tex          
      - name: Publish Latest PDF to Repo
        if: success() || failure()
        run: |
          git config --local user.email "${GITHUB_ACTOR}"
          git config --local user.name "${GITHUB_ACTOR}@users.noreply.github.com"
          git add .
          git commit -m "Compiled and updated paper ${{ github.sha }}"
          git push
